<h2><%= @package.name %></h2>


<% unless @package.id.nil? %>
    <ul class="nav nav-tabs" style="margin-bottom: 20px;">
      <li class="active"><a href="#">Summary</a></li>
      <li><%= link_to "Details", details_admin_billing_package_path(@package) %></li>
    </ul>
<% end %>

<%= simple_form_for [:admin, :billing, @package] do |f| %>

    <%= render 'admin/shared/error_messages', object: f.object %>

    <%= f.association :domain %>
    <%= f.input :name %>
	  <%= f.input :group %>
    <%= f.input :price %>
    <%= f.input :bill_frequency, input_html: { placeholder: '30 days' } %>
    <%= f.input :trial_days %>
    <%= f.input :active %>
    <%= f.input :hidden %>
    <%= f.input :sort %>
    <div class="form-group string optional brand_website">
      <label class="string optional control-label col-sm-3" for="brand_website">Image</label>
      <div class="col-sm-9">
        <%= f.input_field :image_path %> <input type="button" value="Browse Server" class="btn btn-default btn-sm" onclick="javascript:BrowseServer();">
      </div>
    </div>
    <%= f.input :description, as: :text %>
    <script>
            ClassicEditor
                .create( document.querySelector( '#package_description' ) )
                .catch( error => {
                    console.error( error );
                } );
      </script>

    <%= button_tag "Save changes", :class => "btn btn-primary", data: { disable_with: "<i class='fa fa-spinner fa-spin'></i> Please wait ..." } %>

<% end %>



<% content_for :title do %>
    <%= @package.name %>
<% end %>



<% content_for :breadcrumbs do %>
    <li><a href="#">Billing</a></li>
    <li><%= link_to "Packages", admin_billing_packages_path %></li>
	<% unless @package.id.nil? %>
    	<li><%= link_to @package.name, admin_billing_package_path(@package) %></li>
    	<li class="active">edit</li>
	<% else %>
		<li class="active">edit</li>
	<% end %>
<% end %>


<% content_for :head do %>
    <script>
        function BrowseServer()
        {
            // You can use the "CKFinder" class to render CKFinder in a page:
            var finder = new CKFinder( { connectorPath : '<%= Cache.setting(Rails.configuration.domain_id, :system, 'Static Files Url') %>/ckfinder/core/connector/php/connector.php' });
            //finder.basePath = '../';	// The path for the installation of CKFinder (default = "/ckfinder/").
            finder.selectActionFunction = SetFileField;
            finder.popup();
        }

        // This is a sample function which is called when a file is selected in CKFinder.
        function SetFileField( fileUrl )
        {
            document.getElementById( 'package_image_path' ).value = fileUrl.substring(<%= Cache.setting(Rails.configuration.domain_id, :system, 'Static Files Url').length %>);
        }
    </script>
<% end %>